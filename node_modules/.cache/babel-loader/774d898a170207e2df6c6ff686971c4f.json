{"ast":null,"code":"import _slicedToArray from\"D:/\\u524D\\u7AEF/\\u9879\\u76EE/cms-hcj/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import logoImg from'../asserts/logo.png';import defaultAvatar from'../asserts/defaultAvatar.jpg';import{CaretDownOutlined/* SmileOutlined */}from'@ant-design/icons';import{Dropdown,Menu,Space,message}from'antd';import{useNavigate}from'react-router-dom';// import '../pages/less/Header.less'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Header(props){var _useState=useState(defaultAvatar),_useState2=_slicedToArray(_useState,2),avatar=_useState2[0],setAvatar=_useState2[1];var _useState3=useState('游客'),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var navigate=useNavigate();useEffect(function(){var username1=localStorage.getItem('username');var avatar1=localStorage.getItem('avatar');if(username1){setUsername(username1);}if(avatar1){setAvatar('http://47.93.114.103:6688/'+avatar1);}},[props.avatarTag]);// 退出登录\nvar logout=function logout(){localStorage.removeItem('username');localStorage.removeItem('editable');localStorage.removeItem('cms-token');localStorage.removeItem('avatar');localStorage.removeItem('player');message.success('退出成功,即将返回登录页');setTimeout(function(){return navigate('/login');},1500);};var menu=/*#__PURE__*/_jsx(Menu,{items:[{key:'1',// onClick:,\nlabel:/*#__PURE__*/ // <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/edit\">\n//     修改资料\n// </a>\n_jsx(\"span\",{children:\"\\u4FEE\\u6539\\u8D44\\u6599\"})},{type:'divider'},{key:'2',onClick:logout,label:/*#__PURE__*/ // <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/login\">\n//     退出登录\n// </a>\n_jsx(\"span\",{children:\"\\u9000\\u51FA\\u767B\\u5F55\"})//   icon: <SmileOutlined />,\n//   disabled: true,\n}]});return/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"\",className:\"logo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"right\",children:/*#__PURE__*/_jsx(Dropdown,{overlay:menu,children:/*#__PURE__*/_jsx(\"a\",{className:\"ant-dropdown-link\",href:\"/#\",onClick:function onClick(e){return e.preventDefault();},children:/*#__PURE__*/_jsxs(Space,{className:\"space\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatar,className:\"avatar\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:username}),/*#__PURE__*/_jsx(CaretDownOutlined,{})]})})})})]});}","map":{"version":3,"names":["React","useEffect","useState","logoImg","defaultAvatar","CaretDownOutlined","Dropdown","Menu","Space","message","useNavigate","Header","props","avatar","setAvatar","username","setUsername","navigate","username1","localStorage","getItem","avatar1","avatarTag","logout","removeItem","success","setTimeout","menu","key","label","type","onClick","e","preventDefault"],"sources":["D:/前端/项目/cms-hcj/src/components/Header.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport logoImg from '../asserts/logo.png'\r\nimport defaultAvatar from '../asserts/defaultAvatar.jpg'\r\nimport { CaretDownOutlined, /* SmileOutlined */ } from '@ant-design/icons';\r\nimport { Dropdown, Menu, Space, message } from 'antd';\r\nimport { useNavigate } from 'react-router-dom';\r\n// import '../pages/less/Header.less'\r\n\r\nexport default function Header(props) {\r\n    const [avatar, setAvatar] = useState(defaultAvatar)\r\n    const [username, setUsername] = useState('游客')\r\n    const navigate = useNavigate()\r\n\r\n    useEffect(()=>{\r\n        let username1 = localStorage.getItem('username')\r\n        let avatar1 = localStorage.getItem('avatar')\r\n        if(username1){\r\n            setUsername(username1)\r\n        }\r\n        if(avatar1){\r\n            setAvatar('http://47.93.114.103:6688/'+avatar1)\r\n        }\r\n    },[props.avatarTag])\r\n    \r\n\r\n    // 退出登录\r\n    const logout = () => {\r\n        localStorage.removeItem('username')\r\n        localStorage.removeItem('editable')\r\n        localStorage.removeItem('cms-token')\r\n        localStorage.removeItem('avatar')\r\n        localStorage.removeItem('player')\r\n        message.success('退出成功,即将返回登录页')\r\n        setTimeout(() => navigate('/login'), 1500)\r\n\r\n    }\r\n\r\n    const menu = (\r\n        <Menu\r\n            items={[\r\n                {\r\n                    key: '1',\r\n                    // onClick:,\r\n                    label: (\r\n                        // <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/edit\">\r\n                        //     修改资料\r\n                        // </a>\r\n                        <span>修改资料</span>\r\n                    ),\r\n                },\r\n                {\r\n                    type: 'divider',\r\n                },\r\n                {\r\n                    key: '2',\r\n                    onClick: logout,\r\n                    label: (\r\n                        // <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/login\">\r\n                        //     退出登录\r\n                        // </a>\r\n                        <span>退出登录</span>\r\n                    ),\r\n                    //   icon: <SmileOutlined />,\r\n                    //   disabled: true,\r\n                },\r\n\r\n            ]}\r\n        />\r\n    );\r\n    return (\r\n        <header>\r\n            <img src={logoImg} alt=\"\" className='logo' />\r\n            <div className=\"right\">\r\n                <Dropdown overlay={menu}>\r\n                    <a className='ant-dropdown-link' href='/#' onClick={(e) => e.preventDefault()}>\r\n                        <Space className='space'>\r\n                            <img src={avatar}\r\n                                className='avatar' alt=\"\" />\r\n                            <span>{username}</span>\r\n                            <CaretDownOutlined />\r\n                            {/* <DownOutlined /> */}\r\n                        </Space>\r\n                    </a>\r\n                </Dropdown>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n"],"mappings":"0HAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAOC,QAAO,KAAM,qBAAqB,CACzC,MAAOC,cAAa,KAAM,8BAA8B,CACxD,OAASC,iBAAmB,wBAA2B,mBAAmB,CAC1E,OAASC,QAAQ,CAAEC,IAAI,CAAEC,KAAK,CAAEC,OAAO,KAAQ,MAAM,CACrD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C;AAAA,wFAEA,cAAe,SAASC,OAAM,CAACC,KAAK,CAAE,CAClC,cAA4BV,QAAQ,CAACE,aAAa,CAAC,wCAA5CS,MAAM,eAAEC,SAAS,eACxB,eAAgCZ,QAAQ,CAAC,IAAI,CAAC,yCAAvCa,QAAQ,eAAEC,WAAW,eAC5B,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAE9BT,SAAS,CAAC,UAAI,CACV,GAAIiB,UAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAChD,GAAIC,QAAO,CAAGF,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAC5C,GAAGF,SAAS,CAAC,CACTF,WAAW,CAACE,SAAS,CAAC,CAC1B,CACA,GAAGG,OAAO,CAAC,CACPP,SAAS,CAAC,4BAA4B,CAACO,OAAO,CAAC,CACnD,CACJ,CAAC,CAAC,CAACT,KAAK,CAACU,SAAS,CAAC,CAAC,CAGpB;AACA,GAAMC,OAAM,CAAG,QAATA,OAAM,EAAS,CACjBJ,YAAY,CAACK,UAAU,CAAC,UAAU,CAAC,CACnCL,YAAY,CAACK,UAAU,CAAC,UAAU,CAAC,CACnCL,YAAY,CAACK,UAAU,CAAC,WAAW,CAAC,CACpCL,YAAY,CAACK,UAAU,CAAC,QAAQ,CAAC,CACjCL,YAAY,CAACK,UAAU,CAAC,QAAQ,CAAC,CACjCf,OAAO,CAACgB,OAAO,CAAC,cAAc,CAAC,CAC/BC,UAAU,CAAC,iBAAMT,SAAQ,CAAC,QAAQ,CAAC,GAAE,IAAI,CAAC,CAE9C,CAAC,CAED,GAAMU,KAAI,cACN,KAAC,IAAI,EACD,KAAK,CAAE,CACH,CACIC,GAAG,CAAE,GAAG,CACR;AACAC,KAAK,eACD;AACA;AACA;AACA,kDAER,CAAC,CACD,CACIC,IAAI,CAAE,SACV,CAAC,CACD,CACIF,GAAG,CAAE,GAAG,CACRG,OAAO,CAAER,MAAM,CACfM,KAAK,eACD;AACA;AACA;AACA,kDAEJ;AACA;AACJ,CAAC,CAEH,EAET,CACD,mBACI,uCACI,YAAK,GAAG,CAAE1B,OAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,EAAG,cAC7C,YAAK,SAAS,CAAC,OAAO,uBAClB,KAAC,QAAQ,EAAC,OAAO,CAAEwB,IAAK,uBACpB,UAAG,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAE,iBAACK,CAAC,QAAKA,EAAC,CAACC,cAAc,EAAE,EAAC,uBAC1E,MAAC,KAAK,EAAC,SAAS,CAAC,OAAO,wBACpB,YAAK,GAAG,CAAEpB,MAAO,CACb,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,EAAG,cAChC,sBAAOE,QAAQ,EAAQ,cACvB,KAAC,iBAAiB,IAAG,GAEjB,EACR,EACG,EACT,GACD,CAEjB"},"metadata":{},"sourceType":"module"}