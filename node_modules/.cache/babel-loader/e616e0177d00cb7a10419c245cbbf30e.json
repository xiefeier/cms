{"ast":null,"code":"import React from'react';import{Button,/* Checkbox, */Form,Input,message}from'antd';import'./less/Login.less';import logoImg from\"../asserts/logo.png\";import{LockOutlined,UserOutlined}from'@ant-design/icons';import{Link,useNavigate}from'react-router-dom';import{LoginApi}from'../request/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var navigate=useNavigate();var onFinish=function onFinish(values){console.log('Success:',values);LoginApi({username:values.username,password:values.password}).then(function(res){console.log(res);if(res.errCode===0){message.success(res.message);// 存储数据\nlocalStorage.setItem('avatar',res.data.avatar);localStorage.setItem('cms-token',res.data['cms-token']);localStorage.setItem('editable',res.data.editable);localStorage.setItem('player',res.data.player);localStorage.setItem('username',res.data.username);// 跳转到根路径\nsetTimeout(function(){navigate('/');},1500);}else if(res.errCode===1){message.error(res.message);}});};// const onFinishFailed = (errorInfo) => {\n//   console.log('Failed:', errorInfo);\n// };\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login_box\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"\"}),/*#__PURE__*/_jsxs(Form,{name:\"basic\"// labelCol={{\n//   span: 8,\n// }}\n// wrapperCol={{\n//   span: 16,\n// }}\n,initialValues:{remember:true},onFinish:onFinish// onFinishFailed={onFinishFailed}\n,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(Form.Item,{// label=\"Username\"\nname:\"username\",rules:[{required:true,message:'Please input your username!'}],children:/*#__PURE__*/_jsx(Input,{size:\"large\",prefix:/*#__PURE__*/_jsx(UserOutlined,{}),placeholder:\"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\"})}),/*#__PURE__*/_jsx(Form.Item,{// label=\"Password\"\nname:\"password\",rules:[{required:true,message:'Please input your password!'}],children:/*#__PURE__*/_jsx(Input.Password,{size:\"large\",prefix:/*#__PURE__*/_jsx(LockOutlined,{}),placeholder:\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"\\u8FD8\\u6CA1\\u8D26\\u53F7\\uFF1F\\u7ACB\\u5373\\u6CE8\\u518C\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{size:\"large\",type:\"primary\",htmlType:\"submit\",block:true,children:\"Submit\"})})]})]})});}","map":{"version":3,"names":["React","Button","Form","Input","message","logoImg","LockOutlined","UserOutlined","Link","useNavigate","LoginApi","Login","navigate","onFinish","values","console","log","username","password","then","res","errCode","success","localStorage","setItem","data","avatar","editable","player","setTimeout","error","remember","required"],"sources":["D:/前端/项目/cms-hcj/src/pages/Login.jsx"],"sourcesContent":["import React from 'react'\r\nimport { Button, /* Checkbox, */ Form, Input, message } from 'antd';\r\nimport './less/Login.less'\r\nimport logoImg from \"../asserts/logo.png\"\r\nimport { LockOutlined, UserOutlined } from '@ant-design/icons';\r\nimport { Link,useNavigate } from 'react-router-dom';\r\nimport {LoginApi} from '../request/api'\r\n\r\nexport default function Login() {\r\nconst navigate = useNavigate()\r\n  const onFinish = (values) => {\r\n    console.log('Success:', values);\r\n    LoginApi({\r\n      username:values.username,\r\n      password:values.password,\r\n    }).then(res=>{\r\n      console.log(res)\r\n      if(res.errCode===0){\r\n        message.success(res.message)\r\n        // 存储数据\r\n        localStorage.setItem('avatar',res.data.avatar)\r\n        localStorage.setItem('cms-token',res.data['cms-token'])\r\n        localStorage.setItem('editable',res.data.editable)\r\n        localStorage.setItem('player',res.data.player)\r\n        localStorage.setItem('username',res.data.username)\r\n\r\n        // 跳转到根路径\r\n        setTimeout(()=>{\r\n          navigate('/')\r\n        },1500)\r\n      }else if(res.errCode===1){\r\n        message.error(res.message)\r\n      }\r\n    })\r\n  };\r\n  // const onFinishFailed = (errorInfo) => {\r\n  //   console.log('Failed:', errorInfo);\r\n  // };\r\n\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <div className='login_box'>\r\n        <img src={logoImg} alt=\"\" />\r\n        <Form\r\n          name=\"basic\"\r\n          // labelCol={{\r\n          //   span: 8,\r\n          // }}\r\n          // wrapperCol={{\r\n          //   span: 16,\r\n          // }}\r\n          initialValues={{\r\n            remember: true,\r\n          }}\r\n          onFinish={onFinish}\r\n          // onFinishFailed={onFinishFailed}\r\n          autoComplete=\"off\"\r\n        >\r\n          <Form.Item\r\n            // label=\"Username\"\r\n            name=\"username\"\r\n            \r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: 'Please input your username!',\r\n              },\r\n            ]}\r\n          >\r\n            <Input size='large' prefix={<UserOutlined />} placeholder=\"请输入用户名\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            // label=\"Password\"\r\n            name=\"password\"\r\n            \r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: 'Please input your password!',\r\n              },\r\n            ]}\r\n          >\r\n            <Input.Password size='large' prefix={<LockOutlined />} placeholder=\"请输入密码\" />\r\n          </Form.Item>\r\n\r\n          {/* <Form.Item\r\n            name=\"remember\"\r\n            valuePropName=\"checked\"\r\n            wrapperCol={{\r\n              offset: 8,\r\n              span: 16,\r\n            }}\r\n          >\r\n            <Checkbox>Remember me</Checkbox>\r\n          </Form.Item> */}\r\n\r\n          <Form.Item>\r\n            <Link to=\"/register\">还没账号？立即注册</Link>\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n          // wrapperCol={{\r\n          //   offset: 8,\r\n          //   span: 16,\r\n          // }}\r\n          >\r\n            <Button size='large' type=\"primary\" htmlType=\"submit\" block>\r\n              Submit\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}